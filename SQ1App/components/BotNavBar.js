import { StyleSheet, View, TouchableOpacity, Animated, Vibration } from "react-native";
import {Svg, Path, Rect, Mask, Circle} from "react-native-svg";
import { useRef } from 'react';
import { useNavigation } from '@react-navigation/native';
import { useUser } from '../context/UserContext';


function BotNavBar({onNavChange}){
    const position = useRef(new Animated.ValueXY({x:-12, y:0})).current;
    const { username } = useUser();

    function moveToHome(){
        Animated.timing(position, {
            toValue:{x:-12.5, y:0}, 
            duration: 300,
            useNativeDriver: true
        }).start()
        onNavChange('home')
    };

    function moveToLibrary(){
        Animated.timing(position, {
            toValue:{x:56, y:0}, 
            duration: 300,
            useNativeDriver: true
        }).start()
        onNavChange('library')
    };

    function moveToActivity(){
        Animated.timing(position, {
            toValue:{x:125, y:0}, 
            duration: 300,
            useNativeDriver: true
        }).start()
        onNavChange('activity')
    };

    function moveToLink(){
        Animated.timing(position, {
            toValue:{x:194, y:0}, 
            duration: 300,
            useNativeDriver: true
        }).start()
        onNavChange('linkCenter')
    };

    function moveToAccount(){
        Animated.timing(position, {
            toValue:{x:262, y:0}, 
            duration: 300,
            useNativeDriver: true
        }).start()
        
        if (username) {
            onNavChange('accountwelcome')
        } else {
            onNavChange('account')
        }
    };

    function moveToPersonalData() {
        Animated.timing(position, {
            toValue: { x: 315, y: -15 },
            duration: 300,
            useNativeDriver: true
        }).start()
        onNavChange('personalData')
    };
    

    const animatedStyle = {
        transform: [
            {translateX: position.x},
            {translateY: position.y}
        ]
    };

    return(
        <View style={styles.navBar}>
            <Animated.View style={[styles.selector, animatedStyle]}>
                <Svg width="62" height="62" viewBox="0 0 62 62" fill="none">
                    <Rect 
                    x="1.5" 
                    y="1.5" 
                    width="59" 
                    height="59" 
                    rx="13.5" 
                    fill="#D9D9D9" 
                    stroke="#0C0033" 
                    strokeWidth="3"
                    />
                </Svg>
            </Animated.View>

            {/*Home Icon*/}
            <TouchableOpacity onPress={moveToHome}>
                <Svg style={styles.icons} width="61" height="61" viewBox="0 3 61 61" fill="none">
                    <Path 
                        d="M12.7084 32.4306C12.7084 28.9797 12.7084 27.2542 13.406 25.7375C14.1036 24.2208 15.4136 23.0978 18.0338 20.852L20.5755 18.6734C25.3114 14.614 27.6794 12.5844 30.5 12.5844C33.3207 12.5844 35.6887 14.614 40.4246 18.6734L42.9663 20.852C45.5864 23.0978 46.8965 24.2208 47.5941 25.7375C48.2917 27.2542 48.2917 28.9797 48.2917 32.4306V43.2083C48.2917 48.0009 48.2917 50.3972 46.8028 51.8861C45.314 53.375 42.9177 53.375 38.125 53.375H22.875C18.0824 53.375 15.6861 53.375 14.1972 51.8861C12.7084 50.3972 12.7084 48.0009 12.7084 43.2083V32.4306Z" 
                        stroke="#0C0033" 
                        strokeWidth="4"
                    />
                    <Path 
                        d="M36.8542 53.375V39.125C36.8542 38.5727 36.4065 38.125 35.8542 38.125H25.1459C24.5936 38.125 24.1459 38.5727 24.1459 39.125V53.375" 
                        stroke="#0C0033" 
                        strokeWidth="4" 
                        strokeLinecap="round" 
                        strokeLineJoin="round"
                    />
                </Svg>
            </TouchableOpacity>

            {/*Library Icon*/}
            <TouchableOpacity onPress={moveToLibrary}>
                <Svg style={styles.icons} width="61" height="61" viewBox="-4 -4 61 61" fill="none">
                    <Path
                        d="M44.1667 26.5V42.375C44.1667 44.2606 44.1667 45.2034 43.5809 45.7892C42.9951 46.375 42.0523 46.375 40.1667 46.375H14.3542C11.9887 46.375 10.8059 46.375 9.99414 45.7451C9.79567 45.591 9.61733 45.4127 9.46331 45.2142C8.83337 44.4025 8.83337 43.2197 8.83337 40.8542V40.8542C8.83337 38.4886 8.83337 37.3058 9.46331 36.4941C9.61733 36.2956 9.79567 36.1173 9.99414 35.9633C10.8059 35.3333 11.9887 35.3333 14.3542 35.3333H40.1667C42.0523 35.3333 42.9951 35.3333 43.5809 34.7475C44.1667 34.1618 44.1667 33.219 44.1667 31.3333V10.625C44.1667 8.73938 44.1667 7.79657 43.5809 7.21079C42.9951 6.625 42.0523 6.625 40.1667 6.625H12.8334C10.9478 6.625 10.0049 6.625 9.41916 7.21079C8.83337 7.79657 8.83337 8.73938 8.83337 10.625V40.8542" 
                        stroke="#0C0033" 
                        strokeWidth="4"
                    />
                    <Path
                        d="M19.875 17.6666L33.125 17.6666" 
                        stroke="#0C0033" 
                        strokeWidth="4" 
                        strokeLinecap="round"
                    />
                </Svg>
            </TouchableOpacity>

            {/*Activity Icon*/}
            <TouchableOpacity onPress={moveToActivity}>
                <Svg style={styles.icons} width="61" height="61" viewBox="-2 1 61 61" fill="none">
                    <Mask id="path-1-outside-1_13_8204" maskUnits="userSpaceOnUse" x="8.70837" y="11.25" width="41" height="41" fill="black">
                        <Rect 
                            fill="white" 
                            x="8.70837" 
                            y="11.25" 
                            width="41" 
                            height="41"
                        />
                        <Path
                            d="M36.7108 16.6642L15.6418 37.7333C15.4471 37.9279 15.3498 38.0253 15.2828 38.1436C15.2158 38.2618 15.1824 38.3954 15.1157 38.6624L12.9105 47.4832C12.8202 47.8442 12.7751 48.0248 12.8752 48.1249C12.9753 48.2249 13.1558 48.1798 13.5168 48.0896L22.3376 45.8844C22.6047 45.8176 22.7382 45.7842 22.8565 45.7172C22.9748 45.6503 23.0721 45.5529 23.2667 45.3583L23.2668 45.3583L44.3358 24.2892C45.0025 23.6225 45.3358 23.2892 45.3358 22.875C45.3358 22.4608 45.0025 22.1275 44.3358 21.4608L39.5393 16.6642C38.8726 15.9975 38.5393 15.6642 38.125 15.6642C37.7108 15.6642 37.3775 15.9975 36.7108 16.6642Z"
                        />
                    </Mask>
                    <Path
                        d="M15.6418 37.7333L18.4702 40.5617L18.4702 40.5617L15.6418 37.7333ZM36.7108 16.6642L33.8824 13.8358V13.8358L36.7108 16.6642ZM39.5393 16.6642L36.7108 19.4926L36.7108 19.4926L39.5393 16.6642ZM44.3358 21.4608L47.1643 18.6324V18.6324L44.3358 21.4608ZM44.3358 24.2892L47.1643 27.1176V27.1176L44.3358 24.2892ZM23.2668 45.3583L20.4383 42.5299H20.4383L23.2668 45.3583ZM15.1157 38.6624L11.2351 37.6923L11.2351 37.6923L15.1157 38.6624ZM12.9105 47.4832L16.7911 48.4534L16.7911 48.4534L12.9105 47.4832ZM13.5168 48.0896L12.5467 44.209L12.5467 44.209L13.5168 48.0896ZM22.3376 45.8844L23.3078 49.7649L22.3376 45.8844ZM22.8565 45.7172L24.8273 49.1981L24.8273 49.198L22.8565 45.7172ZM15.2828 38.1436L11.802 36.1727L11.802 36.1728L15.2828 38.1436ZM18.4702 40.5617L39.5393 19.4926L33.8824 13.8358L12.8133 34.9049L18.4702 40.5617ZM36.7108 19.4926L41.5074 24.2892L47.1643 18.6324L42.3677 13.8358L36.7108 19.4926ZM41.5074 21.4608L20.4383 42.5299L26.0952 48.1867L47.1643 27.1176L41.5074 21.4608ZM11.2351 37.6923L9.02992 46.5131L16.7911 48.4534L18.9963 39.6326L11.2351 37.6923ZM14.487 51.9701L23.3078 49.7649L21.3675 42.0038L12.5467 44.209L14.487 51.9701ZM9.02992 46.5131C9.0174 46.5631 8.88634 47.0434 8.84046 47.5124C8.78974 48.0309 8.72179 49.6283 10.0468 50.9533L15.7036 45.2964C16.26 45.8528 16.5808 46.5145 16.7238 47.1359C16.8496 47.6824 16.8196 48.1158 16.8025 48.2913C16.7924 48.3937 16.7799 48.4714 16.7723 48.5142C16.7646 48.5577 16.7585 48.585 16.7579 48.5878C16.7572 48.591 16.7588 48.5836 16.7651 48.5579C16.7715 48.5317 16.7791 48.5011 16.7911 48.4534L9.02992 46.5131ZM12.5467 44.209C12.4989 44.2209 12.4684 44.2285 12.4421 44.235C12.4164 44.2412 12.4091 44.2428 12.4123 44.2421C12.415 44.2415 12.4423 44.2354 12.4859 44.2277C12.5286 44.2202 12.6064 44.2076 12.7087 44.1976C12.8842 44.1804 13.3177 44.1504 13.8642 44.2762C14.4856 44.4192 15.1472 44.7401 15.7036 45.2964L10.0468 50.9533C11.3717 52.2782 12.9691 52.2103 13.4876 52.1596C13.9566 52.1137 14.4369 51.9826 14.487 51.9701L12.5467 44.209ZM20.4383 42.5299L20.4383 42.5299L26.0952 48.1867L26.0952 48.1867L20.4383 42.5299ZM20.4383 42.5299C20.3854 42.5828 20.3589 42.6092 20.3388 42.6289C20.3193 42.648 20.3306 42.6363 20.3589 42.6109C20.4264 42.5502 20.6101 42.3925 20.8857 42.2364L24.8273 49.198C25.5273 48.8017 26.0507 48.2312 26.0952 48.1867L20.4383 42.5299ZM23.3078 49.7649C23.3688 49.7497 24.1273 49.5944 24.8273 49.1981L20.8857 42.2364C21.1613 42.0804 21.3911 42.004 21.4778 41.9774C21.5142 41.9662 21.53 41.9625 21.5036 41.9694C21.4763 41.9765 21.4401 41.9856 21.3675 42.0038L23.3078 49.7649ZM41.5074 24.2892C41.6846 24.4664 41.7914 24.5736 41.8744 24.6609C41.9589 24.7498 41.9501 24.747 41.9057 24.6889C41.8598 24.6287 41.7137 24.4296 41.5815 24.1126C41.436 23.7637 41.3358 23.3406 41.3358 22.875H49.3358C49.3358 21.4417 48.7041 20.4105 48.2659 19.8362C47.8982 19.3543 47.4176 18.8857 47.1643 18.6324L41.5074 24.2892ZM47.1643 27.1176C47.4176 26.8643 47.8982 26.3957 48.2659 25.9138C48.7041 25.3395 49.3358 24.3083 49.3358 22.875H41.3358C41.3358 22.4094 41.436 21.9863 41.5815 21.6374C41.7137 21.3204 41.8598 21.1213 41.9057 21.0611C41.9501 21.003 41.9589 21.0002 41.8744 21.0891C41.7914 21.1764 41.6846 21.2836 41.5074 21.4608L47.1643 27.1176ZM39.5393 19.4926C39.7164 19.3155 39.8236 19.2087 39.911 19.1256C39.9998 19.0411 39.9971 19.0499 39.9389 19.0943C39.8787 19.1402 39.6797 19.2863 39.3626 19.4186C39.0137 19.5641 38.5906 19.6642 38.125 19.6642V11.6642C36.6917 11.6642 35.6605 12.296 35.0863 12.7341C34.6043 13.1018 34.1358 13.5824 33.8824 13.8358L39.5393 19.4926ZM42.3677 13.8358C42.1143 13.5824 41.6458 13.1018 41.1638 12.7341C40.5896 12.296 39.5584 11.6642 38.125 11.6642V19.6642C37.6594 19.6642 37.2363 19.5641 36.8874 19.4186C36.5704 19.2863 36.3713 19.1402 36.3112 19.0943C36.253 19.0499 36.2503 19.0411 36.3391 19.1256C36.4265 19.2087 36.5336 19.3155 36.7108 19.4926L42.3677 13.8358ZM12.8133 34.9049C12.7688 34.9494 12.1983 35.4728 11.802 36.1727L18.7636 40.1144C18.6076 40.3899 18.4498 40.5736 18.3892 40.6411C18.3637 40.6694 18.3521 40.6807 18.3711 40.6613C18.3909 40.6411 18.4173 40.6146 18.4702 40.5617L12.8133 34.9049ZM18.9963 39.6326C19.0144 39.56 19.0235 39.5237 19.0306 39.4964C19.0375 39.47 19.0339 39.4859 19.0227 39.5223C18.996 39.609 18.9196 39.8388 18.7636 40.1143L11.802 36.1728C11.4057 36.8727 11.2504 37.6312 11.2351 37.6923L18.9963 39.6326Z" 
                        fill="#0C0033" 
                        mask="url(#path-1-outside-1_13_8204)"
                    />
                    <Path
                        d="M31.7709 19.0625L39.3959 13.9791L47.0209 21.6041L41.9375 29.2291L31.7709 19.0625Z" 
                        fill="#0C0033"
                    />
                </Svg>
            </TouchableOpacity>

            {/*Link Center Icon*/}
            <TouchableOpacity onPress={moveToLink}>
                <Svg style={styles.icons} width="61" height="61" viewBox="-1 -1 61 61" fill="none">
                    <Path
                        d="M35 25L25 35" 
                        stroke="#0C0033" 
                        strokeWidth="4" 
                        strokeLinecap="round" 
                        strokeLinejoin="round"
                    />
                    <Path
                        d="M40 32.5L45 27.5C48.4518 24.0482 48.4518 18.4518 45 15V15C41.5482 11.5482 35.9518 11.5482 32.5 15L27.5 20M20 27.5L15 32.5C11.5482 35.9518 11.5482 41.5482 15 45V45C18.4518 48.4518 24.0482 48.4518 27.5 45L32.5 40" 
                        stroke="#0C0033" 
                        strokeWidth="4" 
                        strokeLinecap="round"
                    />
                </Svg>
            </TouchableOpacity>

            {/*Account Icon*/}
            <TouchableOpacity onPress={moveToAccount}>
                <Svg style={styles.icons} width="61" height="61" viewBox="-5 -7 61 61" fill="none">
                    <Circle
                        cx="25" 
                        cy="14.5833" 
                        r="8.33333" 
                        stroke="#0C0033" 
                        strokeWidth="4" 
                        strokeLinecap="round"
                    />
                    <Path
                        d="M12.6349 33.3747C13.6821 30.7016 16.355 29.1666 19.2259 29.1666H30.774C33.6449 29.1666 36.3178 30.7016 37.365 33.3747C38.3546 35.9005 39.3849 39.2876 39.5579 42.7502C39.5855 43.3018 39.1356 43.75 38.5833 43.75H11.4166C10.8643 43.75 10.4144 43.3018 10.442 42.7502C10.615 39.2876 11.6454 35.9005 12.6349 33.3747Z" 
                        stroke="#0C0033" 
                        strokeWidth="4" 
                        strokeLinecap="round"
                    />
                </Svg>
            </TouchableOpacity>

            <TouchableOpacity onPress={moveToPersonalData}>
                <Svg style={styles.icons} width="30" height="30" viewBox="0 0 30 30" fill="none">
                    {/* Replace this path with your icon's path data */}
                    <Path
                        d="M15 0.9375C7.17688 0.9375 0.9375 7.17688 0.9375 15C0.9375 22.8231 7.17688 29.0625 15 29.0625C22.8231 29.0625 29.0625 22.8231 29.0625 15C29.0625 7.17688 22.8231 0.9375 15 0.9375ZM15 26.5625C8.99375 26.5625 3.4375 21.0063 3.4375 15C3.4375 8.99375 8.99375 3.4375 15 3.4375C21.0063 3.4375 26.5625 8.99375 26.5625 15C26.5625 21.0063 21.0063 26.5625 15 26.5625ZM15 7.8125C12.0063 7.8125 9.5625 10.2563 9.5625 13.25C9.5625 16.2438 12.0063 18.6875 15 18.6875C17.9937 18.6875 20.4375 16.2438 20.4375 13.25C20.4375 10.2563 17.9937 7.8125 15 7.8125Z" 
                        fill="#0C0033"
                    />
                </Svg>
            </TouchableOpacity>


        </View>
    );
};

const styles = StyleSheet.create({
    navBar:{
        backgroundColor: 'steelblue',
        width: '100%',
        height: '10%',
        borderTopWidth: 3,
        borderColor: '#33363F',
        flexDirection: 'row',
        justifyContent: 'space-evenly',
        paddingTop: 5,
    },
    icons:{

    },
    selector:{
        position: 'absolute',
        top: 5,
        left: 20,
    },
});

export default BotNavBar
